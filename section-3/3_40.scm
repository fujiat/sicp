(define x 10)

(parallel-execute (lambda () (set! x (* x x)));P1
                  (lambda () (set! x (* x x x))));P2

;; P1)
;; P11: P1の1番目のxへのアクセス
;; P12: P1の2番目のxへのアクセス
;; P13: P1のxへの設定

;; P2)
;; P21: P2の1番目のxへのアクセス
;; P22: P2の2番目のxへのアクセス
;; P23: P2の3番目のxへのアクセス
;; P24: P2のxへの設定

;; P11(10) -> P12(10) -> P13(100) -> P21(100)  -> P22(100)  -> P23(100)  -> P24(1000000)
;; P11(10) -> P12(10) -> P21(10)  -> P13(100)  -> P22(100)  -> P23(100)  -> P24(100000)
;; P11(10) -> P12(10) -> P21(10)  -> P22(10)   -> P13(100)  -> P23(100)  -> P24(10000)
;; P11(10) -> P12(10) -> P21(10)  -> P22(10)   -> P23(10)   -> P13(100)  -> P24(1000)
;; P11(10) -> P12(10) -> P21(10)  -> P22(10)   -> P23(10)   -> P24(1000) -> P13(100)
;; P11(10) -> P21(10) -> P12(10)  -> P13(100)  -> P22(100)  -> P23(100)  -> P24(100000)
;; P11(10) -> P21(10) -> P12(10)  -> P22(10)   -> P13(100)  -> P23(100)  -> P24(10000)
;; P11(10) -> P21(10) -> P22(10)  -> P12(10)   -> P13(100)  -> P23(100)  -> P24(10000)
;; P11(10) -> P21(10) -> P22(10)  -> P12(10)   -> P23(10)   -> P13(100)  -> P24(10000)
;; P11(10) -> P21(10) -> P22(10)  -> P23(10)   -> P12(10)   -> P13(100)  -> P24(1000)
;; ...
;; P21(10) -> P22(10) -> P23(10)  -> P24(1000) -> P21(1000) -> P2(1000)  -> P13(1000000)
;; ...

;; よって，100, 1000, 10000, 100000, 1000000


(define x 10)

(define s (make-serializer))

(parallel-execute (s (lambda () (set! x (* x x))));P1
                  (s (lambda () (set! x (* x x x)))));P2

;;P1とP2のステップが互い違いにはならないので，
;; P1 -> P2 or P2 -> P1
;; P11(10) -> P12(10) -> P13(100) -> P21(100)  -> P22(100)   -> P23(100)  -> P24(1000000)
;; P21(10) -> P22(10) -> P23(10)  -> P24(1000) -> P21(1000)  -> P2(1000)  -> P13(1000000)
;; よって取りうる値は1000000のみ
